(this.webpackJsonpreact_warriors=this.webpackJsonpreact_warriors||[]).push([[0],{10:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(9),o=a(1),r=a(2),i=a(6),c=a(3),s=a(4),l=a(0),u=a.n(l),m=a(8),v=a.n(m),p=(a(15),a(16),function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={willWatch:!1},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.movie,n=t.removeMovie,o=t.addMovieToWishList,r=t.removeMovieFromWL;return u.a.createElement("div",{className:"col-3 mb-4 "},u.a.createElement("div",{className:"card"},u.a.createElement("img",{className:"card-img-top",src:"https://image.tmdb.org/t/p/w500".concat(a.poster_path),alt:""}),u.a.createElement("div",{className:"card-body"},u.a.createElement("h6",{className:"card-title"},a.title),u.a.createElement("div",null,u.a.createElement("p",null,"Rating: ",a.vote_average),this.state.willWatch?u.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){e.setState({willWatch:!1}),r(a)}},"Watched"):u.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){e.setState({willWatch:!0}),o(a)}},"Will watch")),u.a.createElement("button",{type:"button",onClick:function(){return n(a)}},"delete"))))}}]),a}(u.a.Component)),d=a(5),h=a.n(d),g=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){console.log("Movie Did Mount")}},{key:"shouldComponentUpdate",value:function(e,t,a){return this.props.sort!==e.sort}},{key:"render",value:function(){console.log("movie render");var e=this.props,t=e.sort,a=e.sortMovies,n=function(e){return function(){return a(e)}},o=function(e){return h()("nav-link",{active:t===e})};return l.createElement("ul",{className:"tab nav nav-pills mb-4"},l.createElement("li",{className:"nav-item"},l.createElement("button",{type:"button",className:o("popularity.desc"),onClick:n("popularity.desc")},"Sort Popularity")),l.createElement("li",{className:"nav-item"},l.createElement("button",{type:"button",className:o("revenue.desc"),onClick:n("revenue.desc")},"Sort Revenue")),l.createElement("li",{className:"nav-item"},l.createElement("button",{type:"button",className:o("vote_average.desc"),onClick:n("vote_average.desc")},"Sort Vote average")))}}]),a}(l.Component),f=function(e){var t=e.total_pages,a=e.current_page,n=e.changePage;return u.a.createElement("div",{className:"row"},u.a.createElement("p",{className:"col"},"Total pages ",t),u.a.createElement("div",{className:"w-100"}),u.a.createElement("a",{role:"button",href:"#",className:h()("col btn btn-primary",{disabled:a<=1}),"aria-disabled":a<=1,onClick:function(e){return n("-")}},"<"),u.a.createElement("span",{className:"col align-self-center text-center"},a),u.a.createElement("a",{role:"button",href:"#",className:h()("col btn btn-primary",{disabled:a>=t}),onClick:function(e){return n("+")}},">"))};var b=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).operations={"+":function(e){return++e},"-":function(e){return--e}},r.timeout=null,r.getMovies=function(){fetch("".concat("https://api.themoviedb.org/3","/discover/movie?api_key=").concat("3f4ca4f3a9750da53450646ced312397","&page=").concat(r.state.current_page,"&sort_by=").concat(r.state.sorting)).then((function(e){return e.json()})).then((function(e){r.setState({movies:e.results,current_page:e.page,total_pages:e.total_pages})}))},r.removeMovie=function(e){r.setState({movies:r.state.movies.filter((function(t){return e.id!==t.id}))})},r.addMovieToWishList=function(e){r.setState((function(t,a){return{wishList:[].concat(Object(n.a)(t.wishList),[e])}}))},r.removeMovieFromWL=function(e){r.setState((function(t,a){return t.wishList=t.wishList.filter((function(t){return e.id!==t.id}))}))},r.sortMovies=function(e){r.setState({sorting:e})},r.changePage=function(e){r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout((function(){r.setState({current_page:r.operations[e](r.state.current_page)})}),100)},r.state={show:!1,like:!1,movies:[],wishList:[],sorting:"popularity.desc",current_page:1,total_pages:0},r.removeMovie=r.removeMovie.bind(Object(i.a)(r)),console.log("App Constructor"),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){console.log("App Did Mount"),this.getMovies()}},{key:"componentDidUpdate",value:function(e,t){console.log("App Did Update"),t.sorting===this.state.sorting&&t.current_page===this.state.current_page||this.getMovies()}},{key:"render",value:function(){var e=this;return console.log("App Render"),u.a.createElement("div",{className:"container mt-4"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-9"},u.a.createElement(g,{sort:this.state.sorting,sortMovies:this.sortMovies}),u.a.createElement("div",{className:"row"},this.state.movies.map((function(t,a){return u.a.createElement(p,{key:t.id,movie:t,removeMovie:e.removeMovie,addMovieToWishList:e.addMovieToWishList,removeMovieFromWL:e.removeMovieFromWL})})))),u.a.createElement("div",{className:"col-3"},u.a.createElement("p",null,"Will watch: ",this.state.wishList.length),u.a.createElement(f,{current_page:this.state.current_page,total_pages:this.state.total_pages,changePage:this.changePage}))))}}]),a}(u.a.Component);function E(){return u.a.createElement(b,null)}v.a.render(u.a.createElement(E,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.a896abf4.chunk.js.map